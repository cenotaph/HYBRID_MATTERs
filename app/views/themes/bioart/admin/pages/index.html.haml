.row
  .small-12.columns
    %h2 Listing pages
.row
  .small-12.columns

    = link_to 'New Page', new_admin_page_path, class: [:button, :small]
    
.row
  .small-12.columns
    %table
      %thead
        %tr
          %th= sortable_column "Activity", column: 'subsite'
          %th= sortable_column "Title"
          %th Body
          %th Image
          %th
      
      %tbody
        - @pages.each do |page|
          - next unless page.root?
          %tr
            %td= page.subsite.nil? ? 'main' : page.subsite.name
            %td
              = page.title
              - unless page.children.empty?
                %br/
                - page.children.each do |p|
                  = link_to p.title, edit_admin_page_path(p), target: :_blank
                  | 
            %td= truncate_html(strip_tags(page.body), length: 150)
            %td= image_tag page.image.url(:thumb)
            %td
              = link_to 'Show', page, class: [:button, :small]
              = link_to 'Edit', edit_admin_page_path(page), class: [:button, :small]
              = link_to 'Destroy', [:admin, page], :method => :delete, :data => { :confirm => 'Are you sure?' }, class: [:button, :alert,  :small]

.row
  .small-12.columns

    = link_to 'New Page', new_admin_page_path, class: [:button, :small]
